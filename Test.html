
<!DOCTYPE html>
<html>
	<head>
    <title>Web Push notification</title>
    <link rel="manifest" href="manifest.json" />
	</head>
	<body>
		<br>
        
    <div>Web Push notification Test</div>
    <div id="token"></div>
        
		<!-- The core Firebase JS SDK is always required and must be listed first -->
		<script src="https://www.gstatic.com/firebasejs/7.7.0/firebase-app.js"></script>
		<script src="https://www.gstatic.com/firebasejs/7.7.0/firebase-messaging.js"></script>

		<!-- TODO: Add SDKs for Firebase products that you want to use
			https://firebase.google.com/docs/web/setup#available-libraries -->
    <script src="https://www.gstatic.com/firebasejs/7.7.0/firebase-analytics.js"></script>

		<script>
  // Your web app's Firebase configuration
  var firebaseConfig = {
    apiKey: "AIzaSyARU5CIuEG8F3DZKWdVznhBbq0hltfKSf0",
    authDomain: "divingapp-92953.firebaseapp.com",
    databaseURL: "https://divingapp-92953.firebaseio.com",
    projectId: "divingapp-92953",
    storageBucket: "divingapp-92953.appspot.com",
    messagingSenderId: "240689330959",
    appId: "1:240689330959:web:f5aa3c32444893a782dc7a"
  };
  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);



		const messaging = firebase.messaging();

		messaging.usePublicVapidKey('BEPoUSFVi-sJveb63ibI99UULS7MeirTn4iwMnn-xfuWoSz1rXu6TT4chi8K4Qp87uw8G-yOnVS2_PXT7GdLDs0');

    messaging.requestPermission().then(function(){
      console.log('Notification permission granted.');
      return messaging.getToken();
    })
    .then(function(token){
      console.log(token);
      document.getElementById("token").innerHTML = token; 
    })
    .catch(function(err){
      console.log('Unable to get permission to notify.', err);
    })

    /*
    Notification.requestPermission().then((permission) => {
		if (permission === 'granted') {
      console.log('Notification permission granted.');
      return messaging.getToken();
			// TODO(developer): Retrieve an Instance ID token for use with FCM.
			// ...
		} else {
			console.log('Unable to get permission to notify.');
		}
		}).then();
*/
    messaging.onMessage((payload) => {
      console.log('Message received. ', payload);
      // ...
    });

		</script>
	</body>
</html>

